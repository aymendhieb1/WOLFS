<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<SplitPane dividerPositions="0.7" prefHeight="751.0" prefWidth="1390.0" stylesheets="@stylesFP.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.wolfs.controllers.PostController">

    <TabPane fx:id="leftTabPane" tabClosingPolicy="UNAVAILABLE" visible="true">
        <Tab text="Posts">
            <VBox spacing="10">
                <padding><Insets /></padding>

                <HBox alignment="CENTER_RIGHT" spacing="10" />
                <ScrollPane fx:id="postsContainer" fitToWidth="true" VBox.vgrow="ALWAYS">
                    <VBox fx:id="postsVBox" spacing="15">
                    </VBox>
                </ScrollPane>
            </VBox>
        </Tab>

        <Tab text="Comments">
            <VBox spacing="10">
                <Button fx:id="backButton" onAction="#handleBackButton" text="← Back to Posts">
                    <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                    </padding>
                </Button>
                
                <VBox fx:id="postDetailsBox" spacing="10" styleClass="post-details">
                </VBox>

                <ScrollPane prefHeight="400.0">
                    <VBox fx:id="commentsVBox" spacing="10" />
                </ScrollPane>

                <VBox spacing="5">
                    <TextArea fx:id="newCommentField" promptText="Write a comment..." />
                    <Label fx:id="commentErrorLabel" styleClass="error-label" />
                    <Button fx:id="addCommentButton" onAction="#handleAddComment" text="Add Comment" />
                </VBox>
            </VBox>
        </Tab>
    </TabPane>

    <TabPane>
        <Tab text="Forum Info">
            <VBox spacing="10">
                <ComboBox fx:id="forumComboBox" maxWidth="Infinity" promptText="Select Forum" />
                <VBox fx:id="forumInfoBox" spacing="5">
                    <TextArea fx:id="forumDescription" editable="false" wrapText="true" />
                    <HBox spacing="10">
                        <Label fx:id="forumPrivacyLabel" />
                        <Label fx:id="forumDateLabel" />
                    </HBox>
                    <Label fx:id="memberCountLabel" />

                    <VBox fx:id="membersSection" visible="false">
                        <Label text="Members:" />
                        <ListView fx:id="membersListViewFP" prefHeight="100" />
                    </VBox>
                    <Button fx:id="addPostButton" disable="true" onAction="#handleAddPostButton" text="Ajouter Post" />
                </VBox>
            </VBox>
        </Tab>

        <Tab text="Add Post">
            <VBox spacing="10">
                <ComboBox fx:id="postTypeComboBox" promptText="Select Post Type" />

                <StackPane>
                    <VBox fx:id="announcementFields" spacing="5" visible="false">
                        <TextField fx:id="announcementUserField" promptText="User Email" />
                        <Label fx:id="announcementUserErrorLabel" styleClass="error-label" />
                        <TextField fx:id="announcementTitleField" promptText="Title" />
                        <Label fx:id="titleErrorLabel" styleClass="error-label" />
                        <TextArea fx:id="announcementContentField" promptText="Content" />
                        <Label fx:id="contentErrorLabel" styleClass="error-label" />
                        <TextField fx:id="announcementTagsField" promptText="Tags (comma-separated)" />
                        <Label fx:id="tagsErrorLabel" styleClass="error-label" />
                        
                        <HBox spacing="5">
                            <TextField fx:id="announcementFileField" promptText="File path" HBox.hgrow="ALWAYS" />
                            <Button onAction="#handleBrowseAnnouncementFile" text="Browse" />
                        </HBox>
                        <Label fx:id="announcementFileErrorLabel" styleClass="error-label" />
                        
                        <ComboBox fx:id="announcementStatusComboBox" promptText="Status">
                            <items>
                                <FXCollections fx:factory="observableArrayList">

                                </FXCollections>
                            </items>
                        </ComboBox>

                    </VBox>

                    <VBox fx:id="surveyFields" spacing="5" visible="false">
                        <TextField fx:id="surveyAuthorField" promptText="User Email" />
                        <Label fx:id="surveyAuthorErrorLabel" styleClass="error-label" />
                        <TextField fx:id="surveyQuestionField" promptText="Question" />
                        <Label fx:id="questionErrorLabel" styleClass="error-label" />
                        <TextField fx:id="surveyTagsField" promptText="Tags (comma-separated)" />
                        <Label fx:id="surveyTagsErrorLabel" styleClass="error-label" />

                        <HBox spacing="5">
                            <TextField fx:id="choiceField" promptText="Enter choice" />
                            <Button fx:id="addChoiceButton" disable="true" onAction="#handleAddChoice" text="+" />
                        </HBox>
                        <Label fx:id="choiceErrorLabel" styleClass="error-label" />
                        <ListView fx:id="choicesListView" prefHeight="100" />
                        
                        <HBox spacing="5">
                            <TextField fx:id="surveyFileField" promptText="File path" HBox.hgrow="ALWAYS" />
                            <Button onAction="#handleBrowseSurveyFile" text="Browse" />
                        </HBox>
                        <Label fx:id="surveyFileErrorLabel" styleClass="error-label" />
                        
                        <ComboBox fx:id="surveyStatusComboBox" promptText="Status">
                            <items>
                                <FXCollections fx:factory="observableArrayList">
                                    <String fx:value="active" />
                                    <String fx:value="inactive" />
                                </FXCollections>
                            </items>
                        </ComboBox>
                        
                        <HBox spacing="5">
                            <TextField fx:id="surveyUserField" promptText="Add user email" HBox.hgrow="ALWAYS" />
                            <Button fx:id="addSurveyUserButton" disable="true" onAction="#handleAddSurveyUser" text="+" />
                        </HBox>
                        <Label fx:id="surveyUserErrorLabel" styleClass="error-label" />
                        <ListView fx:id="surveyUsersListView" prefHeight="100" />
                    </VBox>
                </StackPane>

                <Button fx:id="submitPostButton" onAction="#handleSubmitPost" text="Submit Post" />
            </VBox>
        </Tab>

        <Tab fx:id="editTab" closable="false" text="Modifier Post">
            <VBox spacing="10">
                <StackPane>
                    <VBox fx:id="editAnnouncementFields" spacing="5" visible="false">
                        <TextField fx:id="editAnnouncementUserField" promptText="User Email" />
                        <Label fx:id="editAnnouncementUserErrorLabel" styleClass="error-label" />
                        <TextField fx:id="editAnnouncementTitleField" promptText="Title" />
                        <Label fx:id="editTitleErrorLabel" styleClass="error-label" />
                        <TextArea fx:id="editAnnouncementContentField" promptText="Content" />
                        <Label fx:id="editContentErrorLabel" styleClass="error-label" />
                        <TextField fx:id="editAnnouncementTagsField" promptText="Tags (comma-separated)" />
                        <Label fx:id="editTagsErrorLabel" styleClass="error-label" />
                        
                        <HBox spacing="5">
                            <TextField fx:id="editAnnouncementFileField" promptText="File path" HBox.hgrow="ALWAYS" />
                            <Button onAction="#handleBrowseFile" text="Browse" />
                        </HBox>
                        <Label fx:id="editAnnouncementFileErrorLabel" styleClass="error-label" />
                        
                        <ComboBox fx:id="editAnnouncementStatusComboBox" promptText="Status">
                            <items>
                                <FXCollections fx:factory="observableArrayList">
                                    <String fx:value="active" />
                                    <String fx:value="inactive" />
                                </FXCollections>
                            </items>
                        </ComboBox>
                    </VBox>

                    <VBox fx:id="editSurveyFields" spacing="5" visible="false">
                        <TextField fx:id="editSurveyAuthorField" promptText="User Email" />
                        <Label fx:id="editSurveyAuthorErrorLabel" styleClass="error-label" />
                        <TextField fx:id="editSurveyQuestionField" promptText="Question" />
                        <Label fx:id="editSurveyQuestionErrorLabel" styleClass="error-label" />
                        <TextField fx:id="editSurveyTagsField" promptText="Tags (comma-separated)" />
                        <Label fx:id="editSurveyTagsErrorLabel" styleClass="error-label" />
                        
                        <HBox spacing="5">
                            <TextField fx:id="editChoiceField" promptText="Enter choice" />
                            <Button fx:id="editAddChoiceButton" disable="true" onAction="#handleAddEditChoice" text="+" />
                        </HBox>
                        <Label fx:id="editChoiceErrorLabel" styleClass="error-label" />
                        <ListView fx:id="editChoicesListView" prefHeight="100" />
                        
                        <HBox spacing="5">
                            <TextField fx:id="editSurveyFileField" promptText="File path" HBox.hgrow="ALWAYS" />
                            <Button onAction="#handleBrowseFile" text="Browse" />
                        </HBox>
                        <Label fx:id="editSurveyFileErrorLabel" styleClass="error-label" />
                        
                        <ComboBox fx:id="editSurveyStatusComboBox" promptText="Status">
                            <items>
                                <FXCollections fx:factory="observableArrayList">
                                    <String fx:value="active" />
                                    <String fx:value="inactive" />
                                </FXCollections>
                            </items>
                        </ComboBox>
                        
                        <HBox spacing="5">
                            <TextField fx:id="editSurveyUserField" promptText="Add user email" HBox.hgrow="ALWAYS" />
                            <Button fx:id="editAddSurveyUserButton" disable="true" onAction="#handleAddEditSurveyUser" text="+" />
                        </HBox>
                        <Label fx:id="editSurveyUserErrorLabel" styleClass="error-label" />
                        <ListView fx:id="editSurveyUsersListView" prefHeight="100" />
                    </VBox>
                </StackPane>

                <Button fx:id="updatePostButton" onAction="#handleUpdatePost" text="Update Post" />
            </VBox>
        </Tab>
    </TabPane>
</SplitPane>
